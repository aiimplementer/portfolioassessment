<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Implementer - Portfolio Report Generator Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

:root{
--bg-dark-1:#050B18;
--bg-dark-2:#08142E;
--accent:#38E8FF;
--accent-soft:rgba(56,232,255,.18);
--text-main:#E6EDFF;
--text-muted:#9AA4C7;
--card-bg:rgba(255,255,255,.06);
--border-glass:rgba(255,255,255,.14);
}

*{box-sizing:border-box;}

body{
margin:0;
font-family:Inter,Arial;
background:
radial-gradient(1200px 500px at 50% -200px,#0B2B5E 0%,transparent 60%),
linear-gradient(180deg,var(--bg-dark-2),var(--bg-dark-1));
color:var(--text-main);
}

/* ===== HEADER ===== */
.header{
display:flex;
justify-content:space-between;
align-items:center;
padding:16px 24px;
}

.logo{height:36px;}

.live-date{
font-size:14px;
color:var(--text-muted);
}

/* ===== PAGE WRAPPER ===== */
.page{
display:flex;
justify-content:center;
align-items:center;
height:calc(70vh - 70px);
}

/* ===== LOGIN CARD ===== */
.container{
background:var(--card-bg);
padding:5px;
border-radius:16px;
width:460px;
border:1px solid var(--border-glass);
backdrop-filter:blur(14px);
}

h2{text-align:center;margin-bottom:20px;}

input{
width:100%;
padding:12px;
margin-top:5px;
border-radius:10px;
border:1px solid var(--border-glass);
background:rgba(255,255,255,.05);
color:white;
}

button{
width:100%;
padding:12px;
margin-top:15px;
background:linear-gradient(90deg,#38E8FF,#2BC0FF);
border:none;
color:#001018;
font-weight:bold;
cursor:pointer;
border-radius:10px;
}

.link{
text-align:right;
margin-top:8px;
cursor:pointer;
color:#7CF9FF;
font-size:14px;
}

/* ===== HERO ===== */
.hero{
  text-align:center;
  padding:0 10px 10px;
}
.hero h1{
  font-size:38px;
  margin-bottom:10px;
  color:var(--accent);
}
.hero p{
  max-width:720px;
  margin:0 auto;
  font-size:17px;
  line-height:1.6;
  color:var(--text-muted);
}

/* ===== FOOTER ===== */

.footer-bar{
display:flex;
justify-content:flex-end;
align-items:right;
padding:14px 20px;
font-size:13px;
color:var(--text-muted);
}

.footer-status{
display:flex;
gap:20px;
}

.status-item{display:flex;align-items:right;gap:6px;}

.dot{width:8px;height:8px;border-radius:50%;background:#6b7280;}
.dot.up{background:#22c55e}
.dot.down{background:#ef4444}

footer a{color:var(--accent);text-decoration:none;}

.loader{text-align:center;margin-top:10px;display:none;}
.error{color:#ef4444;text-align:center;margin-top:10px;}
.success{color:#22c55e;text-align:center;margin-top:10px;}

</style>
</head>

<body>

<!-- ===== HEADER ===== -->
<div class="header">
<img class="logo" src="https://ai-implementer.netlify.app/images/ai-implementer-logo.png">

<div class="live-date">
Date & Time:
<strong id="liveDateTime"></strong>
</div>
</div>

<section class="hero">
  <h1>Portfolio Report Generator</h1>
  <p>
    One-click generation of investor-ready portfolio reports with
    allocation, XIRR, P&amp;L, and rebalancing insights.
  </p>
</section>

<!-- ===== CENTER LOGIN ===== -->
<div class="page">

<div class="container">

<div id="loginBox">
<h2>Secure Login</h2>

<input id="userid" placeholder="User ID">
<input id="password" type="password" placeholder="Password">

<button onclick="login()">Login</button>

<div class="link" onclick="showReset()">Forgot Password?</div>

<div class="loader" id="loader">Authenticating...</div>
<div class="error" id="error"></div>
</div>

<div id="resetBox" style="display:none;">
<h2>Reset Password</h2>
<p align ='CENTER'>Please contact your Administrator to reset the password.</p>
<!-- <input id="resetUser" placeholder="User ID or Email">

<button onclick="resetPassword()">Send Reset Link</button>!-->
<div class="link" onclick="showLogin()">Back to Login</div> 

<div class="success" id="resetMsg"></div>
<div class="error" id="resetError"></div>
</div>

</div>
</div>

<script>

const LOGIN_WEBHOOK="https://unsparse-sherman-nonfallaciously.ngrok-free.dev/webhook/login";
const RESET_WEBHOOK="https://your-n8n-domain/webhook/reset";
const SUCCESS_PAGE="https://myportfolioassessment.netlify.app/";

async function login(){

document.getElementById("error").innerText="";
document.getElementById("loader").style.display="block";

const userid=document.getElementById("userid").value;
const password=document.getElementById("password").value;

try{

const res=await fetch(LOGIN_WEBHOOK,{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({userid,password})
});

const data=await res.json();
document.getElementById("loader").style.display="none";

if(data.success){
localStorage.setItem("authUser",userid);
window.location.href=SUCCESS_PAGE;
}else{
document.getElementById("error").innerText=
data.message || "Invalid credentials";
}

}catch(e){
document.getElementById("loader").style.display="none";
document.getElementById("error").innerText="Server not reachable";
}
}

async function resetPassword(){

document.getElementById("resetMsg").innerText="";
document.getElementById("resetError").innerText="";

const user=document.getElementById("resetUser").value;

try{

const res=await fetch(RESET_WEBHOOK,{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({user})
});

const data=await res.json();

if(data.success){
document.getElementById("resetMsg").innerText=
"Reset link sent to registered email.";
}else{
document.getElementById("resetError").innerText=
data.message || "Unable to process request";
}

}catch(e){
document.getElementById("resetError").innerText="Server error";
}
}

function showReset(){
document.getElementById("loginBox").style.display="none";
document.getElementById("resetBox").style.display="block";
}

function showLogin(){
document.getElementById("resetBox").style.display="none";
document.getElementById("loginBox").style.display="block";
}

function updateLiveClock(){

const now=new Date();

const formatted=now.toLocaleString("en-IN",{
timeZone:"Asia/Kolkata",
day:"2-digit",
month:"short",
year:"numeric",
hour:"2-digit",
minute:"2-digit",
second:"2-digit",
hour12:false
});

document.getElementById("liveDateTime").innerText=formatted+" IST";
}

updateLiveClock();
setInterval(updateLiveClock,1000);

</script>

<footer class="footer-bar">

<div class="footer-status" >
<div>
Powered by
<a href="https://ai-implementer.netlify.app/" target="_blank">
AI-Implementer
</a>
</div>

</footer>
</body>
</html>